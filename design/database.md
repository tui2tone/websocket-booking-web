# Database Schema Design

## Rooms

```sql
create table public.rooms (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name character varying null,
  description text null,
  slot smallint null default '5'::smallint,
  status smallint null default '1'::smallint,
  available_slot integer null default 0,
  locked_slot integer null default 0,
  updated_at timestamp with time zone null,
  constraint rooms_pkey primary key (id)
) TABLESPACE pg_default;
```

## Beds

```sql
create table public.beds (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  room_id bigint null,
  bed_no bigint null default '1'::bigint,
  level smallint null default '1'::smallint,
  status smallint null default '1'::smallint,
  updated_at timestamp with time zone null default now(),
  locked_user_id bigint null,
  constraint beds_pkey primary key (id),
  constraint beds_locked_user_id_fkey foreign KEY (locked_user_id) references users (id),
  constraint beds_room_id_fkey foreign KEY (room_id) references rooms (id)
) TABLESPACE pg_default;
```

## Users

```sql
create table public.users (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  uuid uuid null default gen_random_uuid (),
  email character varying not null,
  updated_at timestamp with time zone null default now(),
  constraint users_pkey primary key (id),
  constraint users_name_key unique (email),
  constraint users_uuid_key unique (uuid)
) TABLESPACE pg_default;
```

## Booking Queue

```sql
create table public.booking_queue (
  created_at timestamp with time zone not null default now(),
  user_id bigint not null,
  room_id bigint null,
  bed_id bigint null,
  queue_no bigint null default '1'::bigint,
  constraint booking_queue_pkey primary key (user_id),
  constraint booking_queue_bed_id_fkey foreign KEY (bed_id) references beds (id),
  constraint booking_queue_room_id_fkey foreign KEY (room_id) references rooms (id),
  constraint booking_queue_user_id_fkey foreign KEY (user_id) references users (id)
) TABLESPACE pg_default;
```

## Booking History

```sql
create table public.booking_history (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  user_id bigint null,
  room_id bigint null,
  bed_id bigint null,
  constraint booking_history_pkey primary key (id),
  constraint booking_history_bed_id_fkey foreign KEY (bed_id) references beds (id),
  constraint booking_history_room_id_fkey foreign KEY (room_id) references rooms (id),
  constraint booking_history_user_id_fkey foreign KEY (user_id) references users (id)
) TABLESPACE pg_default;
```